<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>ROS Connection Test</title>
<script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>

<script type="text/javascript">
  // --- ì„¤ì •: ë¡œë´‡ IPë¡œ ë³€ê²½í•˜ì„¸ìš” ---
  var robot_ip = 'ws://192.168.130.57:9090'; // ë³¸ì¸ ë¡œë´‡ IP ì…ë ¥
  // ------------------------------

  var ros = new ROSLIB.Ros({
    url : robot_ip
  });

  ros.on('connection', function() {
    document.getElementById("status").innerHTML = "Status: <span style='color:green'>Connected!</span>";
  });

  ros.on('error', function(error) {
    document.getElementById("status").innerHTML = "Status: <span style='color:red'>Error</span>";
  });

  ros.on('close', function() {
    document.getElementById("status").innerHTML = "Status: Closed";
  });

  function sendTestMessage() {
    var chatTopic = new ROSLIB.Topic({
      ros : ros,
      name : '/web_test',
      messageType : 'std_msgs/String'
    });

    // ì—¬ê¸°ë¥¼ ì˜ì–´ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤
    var message = new ROSLIB.Message({
      data : 'Hello ROS! This is from Web.'
    });

    chatTopic.publish(message);
    alert("Message Sent!");
  }
</script>
</head>

<body>
  <h1>ğŸ¤– ROS Web Test</h1>
  <p id="status">Status: Connecting...</p>
  <hr/>
  <button onclick="sendTestMessage()" style="padding: 10px 20px;">
    Send English Message
  </button>
</body>
</html>