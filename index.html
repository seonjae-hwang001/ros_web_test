<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>LIMO Web Controller</title>
<script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>

<style>
  /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê¾¸ë¯¸ê¸° */
  body { text-align: center; font-family: sans-serif; }
  button { width: 100px; height: 60px; margin: 5px; font-size: 18px; cursor: pointer; }
  #status { font-weight: bold; color: gray; }
</style>

<script type="text/javascript">
  // --- [ì¤‘ìš”] ë¡œë´‡ IPë¡œ ë³€ê²½í•˜ì„¸ìš” ---
  var robot_ip = 'ws://192.168.168.57:9090'; 
  // ------------------------------

  var ros = new ROSLIB.Ros({ url : robot_ip });

  ros.on('connection', function() {
    document.getElementById("status").innerHTML = "Status: <span style='color:green'>Connected</span>";
  });

  ros.on('error', function(error) {
    document.getElementById("status").innerHTML = "Status: <span style='color:red'>Error</span>";
  });

  ros.on('close', function() {
    document.getElementById("status").innerHTML = "Status: Closed";
  });

  // 1. í† í”½ ì„¤ì • (cmd_vel)
  var cmdVel = new ROSLIB.Topic({
    ros : ros,
    name : '/cmd_vel',           // LIMOê°€ ë“£ëŠ” í† í”½ ì´ë¦„
    messageType : 'geometry_msgs/Twist'
  });

  // 2. ì´ë™ í•¨ìˆ˜ (ì†ë„, íšŒì „)
  function move(linear, angular) {
    var twist = new ROSLIB.Message({
      linear : {
        x : linear,
        y : 0,
        z : 0
      },
      angular : {
        x : 0,
        y : 0,
        z : angular
      }
    });
    cmdVel.publish(twist);
    console.log("Move: " + linear + ", " + angular);
  }

  // 3. ì •ì§€ í•¨ìˆ˜
  function stopRobot() {
    move(0, 0);
  }
</script>
</head>

<body>
  <h1>ğŸ® LIMO Controller</h1>
  <p id="status">Connecting...</p>
  
  <hr/>
  
  <div>
    <button onclick="move(0.2, 0)">Forward</button> <br/>
    <button onclick="move(0, 0.5)">Left</button>
    <button onclick="stopRobot()" style="background-color: #ffcccc;">STOP</button>
    <button onclick="move(0, -0.5)">Right</button> <br/>
    <button onclick="move(-0.2, 0)">Backward</button>
  </div>

  <p>âš ï¸ Safety: Be careful with the robot speed!</p>
</body>
</html>
